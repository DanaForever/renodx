#include "../lutbuilderoutput.hlsli"

static const float4 _397[17] = { float4(-4.0f, -0.718548238277435302734375f, -4.97062206268310546875f, 0.80891323089599609375f), float4(-4.0f, 2.0810306072235107421875f, -3.0293781757354736328125f, 1.19108676910400390625f), float4(-3.1573765277862548828125f, 3.66812419891357421875f, -2.1261999607086181640625f, 1.5683000087738037109375f), float4(-0.485249996185302734375f, 4.0f, -1.5104999542236328125f, 1.94830000400543212890625f), float4(1.84773242473602294921875f, 4.0f, -1.0578000545501708984375f, 2.308300018310546875f), float4(1.84773242473602294921875f, 4.0f, -0.4668000042438507080078125f, 2.63840007781982421875f), float4(-2.3010299205780029296875f, 0.801995217800140380859375f, 0.11937999725341796875f, 2.85949993133544921875f), float4(-2.3010299205780029296875f, 1.19800484180450439453125f, 0.7088134288787841796875f, 2.9872608184814453125f), float4(-1.9312000274658203125f, 1.5943000316619873046875f, 1.2911865711212158203125f, 3.0127391815185546875f), float4(-1.5204999446868896484375f, 1.99730002880096435546875f, 1.2911865711212158203125f, 3.0127391815185546875f), float4(-1.0578000545501708984375f, 2.3782999515533447265625f, 0.0f, 0.0f), float4(-0.4668000042438507080078125f, 2.7683999538421630859375f, 0.0f, 0.0f), float4(0.11937999725341796875f, 3.0515000820159912109375f, 0.0f, 0.0f), float4(0.7088134288787841796875f, 3.2746293544769287109375f, 0.0f, 0.0f), float4(1.2911865711212158203125f, 3.32743072509765625f, 0.0f, 0.0f), float4(1.2911865711212158203125f, 3.32743072509765625f, 0.0f, 0.0f), 0.0f.xxxx };

cbuffer cb0_buf : register(b0)
{
    uint4 cb0_m[57] : packoffset(c0);
};


static uint gl_Layer;
static float2 TEXCOORD;
static float4 SV_Target;

struct SPIRV_Cross_Input
{
    noperspective float2 TEXCOORD : TEXCOORD0;
    uint gl_Layer : SV_RenderTargetArrayIndex;
};

struct SPIRV_Cross_Output
{
    float4 SV_Target : SV_Target0;
};

float dp2_f32(float2 a, float2 b)
{
    precise float _460 = a.x * b.x;
    return mad(a.y, b.y, _460);
}

float dp3_f32(float3 a, float3 b)
{
    precise float _445 = a.x * b.x;
    return mad(a.z, b.z, mad(a.y, b.y, _445));
}

int cvt_f32_i32(float v)
{
    return isnan(v) ? 0 : ((v < (-2147483648.0f)) ? int(0x80000000) : ((v > 2147483520.0f) ? 2147483647 : int(v)));
}

void frag_main()
{
  uint output_space = 2u;
  // output_space = cb0_m[56u].z;

    float _477 = float(uint(gl_Layer));
    bool _483 = output_space >= 3u;
    float _490 = exp2(log2((TEXCOORD.x - 0.015625f) * 1.03225803375244140625f) * 0.0126833133399486541748046875f);
    float _491 = exp2(log2((TEXCOORD.y - 0.015625f) * 1.03225803375244140625f) * 0.0126833133399486541748046875f);
    float _492 = exp2(log2(_477 * 0.0322580635547637939453125f) * 0.0126833133399486541748046875f);
    float _536 = asfloat(cb0_m[35u].x);
    float _537 = _536 * 1.00055634975433349609375f;
    float _551 = (_536 <= 6996.10791015625f) ? (((((2967800.0f - (4607000064.0f / _537)) / _537) + 99.1100006103515625f) / _537) + 0.24406300485134124755859375f) : (((((1901800.0f - (2006400000.0f / _537)) / _537) + 247.4799957275390625f) / _537) + 0.23703999817371368408203125f);
    float _560 = _536 * _536;
    float _564 = mad(_560, 1.2864121856637211749330163002014e-07f, mad(_536, 0.00015411825734190642833709716796875f, 0.860117733478546142578125f)) / mad(_560, 7.0814513719597016461193561553955e-07f, mad(_536, 0.0008424202096648514270782470703125f, 1.0f));
    float _567 = mad(_560, 4.2048167614439080352894961833954e-08f, mad(_536, 4.2280626075807958841323852539062e-05f, 0.317398726940155029296875f)) / mad(_560, 1.6145605741257895715534687042236e-07f, mad(_536, -2.8974181986995972692966461181641e-05f, 1.0f));
    float _572 = mad(_567, -8.0f, _564 + _564) + 4.0f;
    float _573 = (_564 * 3.0f) / _572;
    float _574 = (_567 + _567) / _572;
    bool _575 = _536 < 4000.0f;
    float2 _578 = float2(_564, _567);
    float _580 = rsqrt(dp2_f32(_578, _578));
    float _585 = asfloat(cb0_m[35u].y);
    float _587 = mad(_585 * (_567 * _580), -0.0500000007450580596923828125f, _564);
    float _589 = mad((_564 * _580) * _585, 0.0500000007450580596923828125f, _567);
    float _593 = mad(_589, -8.0f, _587 + _587) + 4.0f;
    float _599 = (((_587 * 3.0f) / _593) - _573) + (_575 ? _573 : _551);
    float _600 = (((_589 + _589) / _593) - _574) + (_575 ? _574 : (((_551 * 2.86999988555908203125f) + ((_551 * _551) * (-3.0f))) - 0.2750000059604644775390625f));
    float _601 = max(_600, 1.0000000133514319600180897396058e-10f);
    float3 _606 = float3(_599 / _601, 1.0f, ((1.0f - _599) - _600) / _601);
    float _610 = 0.941379249095916748046875f / dp3_f32(float3(0.89509999752044677734375f, 0.2664000093936920166015625f, -0.16140000522136688232421875f), _606);
    float _611 = 1.04043638706207275390625f / dp3_f32(float3(-0.750199973583221435546875f, 1.71350002288818359375f, 0.0366999991238117218017578125f), _606);
    float _612 = 1.08976650238037109375f / dp3_f32(float3(0.0388999991118907928466796875f, -0.06849999725818634033203125f, 1.02960002422332763671875f), _606);
    float3 _622 = float3(_610 * 0.89509999752044677734375f, _611 * (-0.750199973583221435546875f), _612 * 0.0388999991118907928466796875f);
    float3 _624 = float3(_610 * 0.2664000093936920166015625f, _611 * 1.71350002288818359375f, _612 * (-0.06849999725818634033203125f));
    float3 _626 = float3(_610 * (-0.16140000522136688232421875f), _611 * 0.0366999991238117218017578125f, _612 * 1.02960002422332763671875f);
    float3 _634 = float3(dp3_f32(float3(0.986992895603179931640625f, -0.14705429971218109130859375f, 0.15996269881725311279296875f), _622), dp3_f32(float3(0.986992895603179931640625f, -0.14705429971218109130859375f, 0.15996269881725311279296875f), _624), dp3_f32(float3(0.986992895603179931640625f, -0.14705429971218109130859375f, 0.15996269881725311279296875f), _626));
    float3 _638 = float3(dp3_f32(float3(0.4323053061962127685546875f, 0.518360316753387451171875f, 0.049291200935840606689453125f), _622), dp3_f32(float3(0.4323053061962127685546875f, 0.518360316753387451171875f, 0.049291200935840606689453125f), _624), dp3_f32(float3(0.4323053061962127685546875f, 0.518360316753387451171875f, 0.049291200935840606689453125f), _626));
    float3 _642 = float3(dp3_f32(float3(-0.00852870009839534759521484375f, 0.0400427989661693572998046875f, 0.968486726284027099609375f), _622), dp3_f32(float3(-0.00852870009839534759521484375f, 0.0400427989661693572998046875f, 0.968486726284027099609375f), _624), dp3_f32(float3(-0.00852870009839534759521484375f, 0.0400427989661693572998046875f, 0.968486726284027099609375f), _626));
    float3 _646 = float3(dp3_f32(_634, float3(0.41245639324188232421875f, 0.21267290413379669189453125f, 0.01933390088379383087158203125f)), dp3_f32(_638, float3(0.41245639324188232421875f, 0.21267290413379669189453125f, 0.01933390088379383087158203125f)), dp3_f32(_642, float3(0.41245639324188232421875f, 0.21267290413379669189453125f, 0.01933390088379383087158203125f)));
    float3 _648 = float3(dp3_f32(_634, float3(0.3575761020183563232421875f, 0.715152204036712646484375f, 0.119191996753215789794921875f)), dp3_f32(_638, float3(0.3575761020183563232421875f, 0.715152204036712646484375f, 0.119191996753215789794921875f)), dp3_f32(_642, float3(0.3575761020183563232421875f, 0.715152204036712646484375f, 0.119191996753215789794921875f)));
    float3 _650 = float3(dp3_f32(_634, float3(0.180437505245208740234375f, 0.072175003588199615478515625f, 0.950304090976715087890625f)), dp3_f32(_638, float3(0.180437505245208740234375f, 0.072175003588199615478515625f, 0.950304090976715087890625f)), dp3_f32(_642, float3(0.180437505245208740234375f, 0.072175003588199615478515625f, 0.950304090976715087890625f)));
    float3 _659 = float3(_483 ? (exp2(log2(max(_490 - 0.8359375f, 0.0f) / mad(_490, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 10000.0f) : mad(exp2((mad(TEXCOORD.x, 1.03225803375244140625f, -0.01612903177738189697265625f) - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f), _483 ? (exp2(log2(max(_491 - 0.8359375f, 0.0f) / mad(_491, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 10000.0f) : mad(exp2((mad(TEXCOORD.y, 1.03225803375244140625f, -0.01612903177738189697265625f) - 0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f), _483 ? (exp2(log2(max(_492 - 0.8359375f, 0.0f) / mad(_492, -18.6875f, 18.8515625f)) * 6.277394771575927734375f) * 10000.0f) : mad(exp2(mad(_477, 0.0322580635547637939453125f, -0.434017598628997802734375f) * 14.0f), 0.180000007152557373046875f, -0.00266771926544606685638427734375f));
    float3 _665 = float3(dp3_f32(float3(dp3_f32(float3(3.2409698963165283203125f, -1.53738319873809814453125f, -0.4986107647418975830078125f), _646), dp3_f32(float3(3.2409698963165283203125f, -1.53738319873809814453125f, -0.4986107647418975830078125f), _648), dp3_f32(float3(3.2409698963165283203125f, -1.53738319873809814453125f, -0.4986107647418975830078125f), _650)), _659), dp3_f32(float3(dp3_f32(float3(-0.96924364566802978515625f, 1.875967502593994140625f, 0.0415550582110881805419921875f), _646), dp3_f32(float3(-0.96924364566802978515625f, 1.875967502593994140625f, 0.0415550582110881805419921875f), _648), dp3_f32(float3(-0.96924364566802978515625f, 1.875967502593994140625f, 0.0415550582110881805419921875f), _650)), _659), dp3_f32(float3(dp3_f32(float3(0.055630080401897430419921875f, -0.2039769589900970458984375f, 1.05697154998779296875f), _646), dp3_f32(float3(0.055630080401897430419921875f, -0.2039769589900970458984375f, 1.05697154998779296875f), _648), dp3_f32(float3(0.055630080401897430419921875f, -0.2039769589900970458984375f, 1.05697154998779296875f), _650)), _659));
    float _666 = dp3_f32(float3(0.61319148540496826171875f, 0.3395120799541473388671875f, 0.0473663322627544403076171875f), _665);
    float _667 = dp3_f32(float3(0.070206902921199798583984375f, 0.9163358211517333984375f, 0.01345001161098480224609375f), _665);
    float _668 = dp3_f32(float3(0.02061887085437774658203125f, 0.109567292034626007080078125f, 0.8696067333221435546875f), _665);
    float _670 = dp3_f32(float3(_666, _667, _668), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
    float _678 = asfloat(cb0_m[36u].x);
    float _679 = asfloat(cb0_m[36u].y);
    float _680 = asfloat(cb0_m[36u].z);
    float _681 = asfloat(cb0_m[36u].w);
    float _695 = _681 * asfloat(cb0_m[41u].w);
    float _702 = asfloat(cb0_m[37u].x);
    float _703 = asfloat(cb0_m[37u].y);
    float _704 = asfloat(cb0_m[37u].z);
    float _705 = asfloat(cb0_m[37u].w);
    float _719 = _705 * asfloat(cb0_m[42u].w);
    float _726 = asfloat(cb0_m[38u].x);
    float _727 = asfloat(cb0_m[38u].y);
    float _728 = asfloat(cb0_m[38u].z);
    float _729 = asfloat(cb0_m[38u].w);
    float _743 = _729 * asfloat(cb0_m[43u].w);
    float _750 = asfloat(cb0_m[39u].x);
    float _751 = asfloat(cb0_m[39u].y);
    float _752 = asfloat(cb0_m[39u].z);
    float _753 = asfloat(cb0_m[39u].w);
    float _767 = _753 * asfloat(cb0_m[44u].w);
    float _774 = asfloat(cb0_m[40u].x);
    float _775 = asfloat(cb0_m[40u].y);
    float _776 = asfloat(cb0_m[40u].z);
    float _777 = asfloat(cb0_m[40u].w);
    float _791 = _777 + asfloat(cb0_m[45u].w);
    float _795 = _666 - _670;
    float _796 = _667 - _670;
    float _797 = _668 - _670;
    float _851 = clamp(_670 * (1.0f / asfloat(cb0_m[56u].x)), 0.0f, 1.0f);
    float _852 = mad(_851, -2.0f, 3.0f);
    float _853 = _851 * _851;
    float _855 = mad(-_852, _853, 1.0f);
    float _869 = _681 * asfloat(cb0_m[51u].w);
    float _883 = _705 * asfloat(cb0_m[52u].w);
    float _897 = _729 * asfloat(cb0_m[53u].w);
    float _911 = _753 * asfloat(cb0_m[54u].w);
    float _925 = _777 + asfloat(cb0_m[55u].w);
    float _979 = asfloat(cb0_m[56u].y);
    float _984 = clamp((_670 - _979) * (1.0f / (1.0f - _979)), 0.0f, 1.0f);
    float _985 = mad(_984, -2.0f, 3.0f);
    float _986 = _984 * _984;
    float _987 = _985 * _986;
    float _1001 = _681 * asfloat(cb0_m[46u].w);
    float _1015 = _705 * asfloat(cb0_m[47u].w);
    float _1029 = _729 * asfloat(cb0_m[48u].w);
    float _1043 = _753 * asfloat(cb0_m[49u].w);
    float _1057 = _777 + asfloat(cb0_m[50u].w);
    float _1112 = mad(-_985, _986, mad(_852, _853, -1.0f) + 1.0f);
    float _1122 = mad(mad(exp2((1.0f / ((_726 * asfloat(cb0_m[53u].x)) * _897)) * log2(exp2(((_702 * asfloat(cb0_m[52u].x)) * _883) * log2(max(mad(_795, (_678 * asfloat(cb0_m[51u].x)) * _869, _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_750 * asfloat(cb0_m[54u].x)) * _911, (_774 + asfloat(cb0_m[55u].x)) + _925), _987, (mad(exp2((1.0f / ((_726 * asfloat(cb0_m[48u].x)) * _1029)) * log2(exp2(((_702 * asfloat(cb0_m[47u].x)) * _1015) * log2(max(mad(_795, (_678 * asfloat(cb0_m[46u].x)) * _1001, _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_750 * asfloat(cb0_m[49u].x)) * _1043, (_774 + asfloat(cb0_m[50u].x)) + _1057) * _1112) + (mad(exp2((1.0f / ((_726 * asfloat(cb0_m[43u].x)) * _743)) * log2(exp2(((_702 * asfloat(cb0_m[42u].x)) * _719) * log2(max(mad((_678 * asfloat(cb0_m[41u].x)) * _695, _795, _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_750 * asfloat(cb0_m[44u].x)) * _767, (_774 + asfloat(cb0_m[45u].x)) + _791) * _855));
    float _1123 = mad(_987, mad((_751 * asfloat(cb0_m[54u].y)) * _911, exp2((1.0f / (_897 * (_727 * asfloat(cb0_m[53u].y)))) * log2(exp2(((_703 * asfloat(cb0_m[52u].y)) * _883) * log2(max(mad(_796, (_679 * asfloat(cb0_m[51u].y)) * _869, _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_775 + asfloat(cb0_m[55u].y)) + _925), (_1112 * mad(exp2(log2(exp2(((_703 * asfloat(cb0_m[47u].y)) * _1015) * log2(max(mad(_796, _1001 * (_679 * asfloat(cb0_m[46u].y)), _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f) * (1.0f / ((_727 * asfloat(cb0_m[48u].y)) * _1029))), _1043 * (_751 * asfloat(cb0_m[49u].y)), (_775 + asfloat(cb0_m[50u].y)) + _1057)) + (_855 * mad(exp2((1.0f / (_743 * (_727 * asfloat(cb0_m[43u].y)))) * log2(exp2(((_703 * asfloat(cb0_m[42u].y)) * _719) * log2(max(mad((_679 * asfloat(cb0_m[41u].y)) * _695, _796, _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_751 * asfloat(cb0_m[44u].y)) * _767, (_775 + asfloat(cb0_m[45u].y)) + _791)));
    float _1124 = mad(_987, mad((_752 * asfloat(cb0_m[54u].z)) * _911, exp2((1.0f / (_897 * (_728 * asfloat(cb0_m[53u].z)))) * log2(exp2((_883 * (_704 * asfloat(cb0_m[52u].z))) * log2(max(mad(_797, (_680 * asfloat(cb0_m[51u].z)) * _869, _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), _925 + (_776 + asfloat(cb0_m[55u].z))), (_1112 * mad(exp2(log2(exp2(((_704 * asfloat(cb0_m[47u].z)) * _1015) * log2(max(mad(_797, _1001 * (_680 * asfloat(cb0_m[46u].z)), _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f) * (1.0f / (_1029 * (_728 * asfloat(cb0_m[48u].z))))), _1043 * (_752 * asfloat(cb0_m[49u].z)), (_776 + asfloat(cb0_m[50u].z)) + _1057)) + (_855 * mad(exp2((1.0f / (_743 * (_728 * asfloat(cb0_m[43u].z)))) * log2(exp2((_719 * (_704 * asfloat(cb0_m[42u].z))) * log2(max(mad((_680 * asfloat(cb0_m[41u].z)) * _695, _797, _670), 0.0f) * 5.5555553436279296875f)) * 0.180000007152557373046875f)), (_752 * asfloat(cb0_m[44u].z)) * _767, _791 + (_776 + asfloat(cb0_m[45u].z)))));
    
    // ap1 untonem

    float3 _1125 = float3(_1122, _1123, _1124);
    float _1126 = dp3_f32(float3(1.70505154132843017578125f, -0.621790707111358642578125f, -0.083258397877216339111328125f), _1125);
    float _1127 = dp3_f32(float3(-0.13025714457035064697265625f, 1.140802860260009765625f, -0.0105485282838344573974609375f), _1125);
    float _1128 = dp3_f32(float3(-0.024003274738788604736328125f, -0.128968775272369384765625f, 1.152971744537353515625f), _1125);
    float _1453;
    float _1454;
    float _1455;

    // tonemapping starts here

    if (asfloat(cb0_m[26u].w) == 0.0f)

    // mobile tonemap
    {
        float3 _1136 = float3(_1126, _1127, _1128);
        float _1178 = 1.0f / (dp3_f32(_1136, float3(asfloat(cb0_m[24u].x), asfloat(cb0_m[24u].y), asfloat(cb0_m[24u].z))) + 1.0f);
        float _1201 = max(dp3_f32(_1136, float3(asfloat(cb0_m[19u].x), asfloat(cb0_m[19u].y), asfloat(cb0_m[19u].z))) * mad(_1178, asfloat(cb0_m[26u].x), asfloat(cb0_m[25u].x)), 0.0f);
        float _1202 = max(dp3_f32(_1136, float3(asfloat(cb0_m[20u].x), asfloat(cb0_m[20u].y), asfloat(cb0_m[20u].z))) * mad(_1178, asfloat(cb0_m[26u].y), asfloat(cb0_m[25u].y)), 0.0f);
        float _1203 = max(dp3_f32(_1136, float3(asfloat(cb0_m[21u].x), asfloat(cb0_m[21u].y), asfloat(cb0_m[21u].z))) * mad(_1178, asfloat(cb0_m[26u].z), asfloat(cb0_m[25u].z)), 0.0f);
        float _1206 = asfloat(cb0_m[22u].x);
        float _1210 = max(_1206 - _1201, 0.0f);
        float _1211 = max(_1206 - _1202, 0.0f);
        float _1212 = max(_1206 - _1203, 0.0f);
        float _1215 = asfloat(cb0_m[22u].z);
        float _1216 = max(_1201, _1215);
        float _1217 = max(_1215, _1202);
        float _1218 = max(_1215, _1203);
        float _1224 = asfloat(cb0_m[23u].x);
        float _1227 = asfloat(cb0_m[23u].y);
        float _1233 = asfloat(cb0_m[22u].w);
        float _1242 = asfloat(cb0_m[19u].w);
        float _1248 = asfloat(cb0_m[22u].y);
        float _1257 = asfloat(cb0_m[20u].w);
        float _1263 = asfloat(cb0_m[21u].w);
        _1453 = mad(1.0f / (_1233 + _1218), mad(_1224, _1218, _1227), mad(_1263, clamp(_1206, _1203, _1215), mad(1.0f / (_1248 + _1212), _1242 * _1212, _1257))) - 0.00200000009499490261077880859375f;
        _1454 = mad(1.0f / (_1233 + _1217), mad(_1224, _1217, _1227), mad(_1263, clamp(_1206, _1202, _1215), mad(1.0f / (_1248 + _1211), _1242 * _1211, _1257))) - 0.00200000009499490261077880859375f;
        _1455 = mad(mad(_1216, _1224, _1227), 1.0f / (_1216 + _1233), mad(clamp(_1201, _1206, _1215), _1263, mad(_1210 * _1242, 1.0f / (_1210 + _1248), _1257))) - 0.00200000009499490261077880859375f;

        // _1453 *= 2;
        // _1454 *= 2;
        // _1455 *= 2;
      }
    else

    // filmic tonemap
    {
        float3 _1273 = float3(_1126, _1127, _1128);
        float _1277 = max(dp3_f32(float3(0.61319148540496826171875f, 0.3395120799541473388671875f, 0.0473663322627544403076171875f), _1273), 0.0f);
        float _1278 = max(dp3_f32(float3(0.070206902921199798583984375f, 0.9163358211517333984375f, 0.01345001161098480224609375f), _1273), 0.0f);
        float _1279 = max(dp3_f32(float3(0.02061887085437774658203125f, 0.109567292034626007080078125f, 0.8696067333221435546875f), _1273), 0.0f);
        float _1281 = dp3_f32(float3(_1277, _1278, _1279), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
        float _1290 = asfloat(cb0_m[27u].w);
        float _1295 = asfloat(cb0_m[27u].y);
        float _1296 = (_1290 + 1.0f) - _1295;
        float _1300 = asfloat(cb0_m[28u].x) + 1.0f;
        float _1303 = asfloat(cb0_m[27u].z);
        float _1304 = _1300 - _1303;
        float _1310 = asfloat(cb0_m[27u].x);
        float _1312 = (1.0f - _1295) / _1310;
        float _1314 = (_1290 + 0.180000007152557373046875f) / _1296;
        float _1323 = (_1295 > 0.800000011920928955078125f) ? (((0.819999992847442626953125f - _1295) / _1310) - 0.74472749233245849609375f) : mad(-(log2(_1314 / ((1.0f - _1314) + 1.0f)) * 0.3465735912322998046875f), _1296 / _1310, -0.74472749233245849609375f);
        float _1324 = _1312 - _1323;
        float _1327 = (_1303 / _1310) + (_1323 - _1312);
        float _1328 = log2(mad(_1277 - _1281, 0.959999978542327880859375f, _1281));
        float _1329 = log2(mad(_1278 - _1281, 0.959999978542327880859375f, _1281));
        float _1330 = log2(mad(_1279 - _1281, 0.959999978542327880859375f, _1281));
        float _1331 = _1328 * 0.3010300099849700927734375f;
        float _1332 = _1329 * 0.3010300099849700927734375f;
        float _1333 = _1330 * 0.3010300099849700927734375f;
        float _1337 = _1310 * mad(_1328, 0.3010300099849700927734375f, _1324);
        float _1338 = _1310 * mad(_1329, 0.3010300099849700927734375f, _1324);
        float _1339 = _1310 * mad(_1330, 0.3010300099849700927734375f, _1324);
        float _1340 = _1296 + _1296;
        float _1342 = (_1310 * (-2.0f)) / _1296;
        float _1344 = mad(_1328, 0.3010300099849700927734375f, -_1323);
        float _1346 = mad(_1329, 0.3010300099849700927734375f, -_1323);
        float _1348 = mad(_1330, 0.3010300099849700927734375f, -_1323);
        float _1367 = _1304 + _1304;
        float _1369 = (_1310 + _1310) / _1304;
        float _1397 = (_1331 < _1323) ? ((_1340 / (exp2((_1342 * _1344) * 1.44269502162933349609375f) + 1.0f)) - _1290) : _1337;
        float _1398 = (_1323 > _1332) ? ((_1340 / (exp2((_1342 * _1346) * 1.44269502162933349609375f) + 1.0f)) - _1290) : _1338;
        float _1399 = (_1323 > _1333) ? ((_1340 / (exp2((_1342 * _1348) * 1.44269502162933349609375f) + 1.0f)) - _1290) : _1339;
        float _1406 = _1327 - _1323;
        float _1410 = clamp(_1344 / _1406, 0.0f, 1.0f);
        float _1411 = clamp(_1346 / _1406, 0.0f, 1.0f);
        float _1412 = clamp(_1348 / _1406, 0.0f, 1.0f);
        bool _1413 = _1327 < _1323;
        float _1417 = _1413 ? (1.0f - _1410) : _1410;
        float _1418 = _1413 ? (1.0f - _1411) : _1411;
        float _1419 = _1413 ? (1.0f - _1412) : _1412;
        float _1432 = mad(mad(_1417, -2.0f, 3.0f) * (_1417 * _1417), ((_1327 < _1331) ? (_1300 - (_1367 / (exp2((_1369 * mad(_1328, 0.3010300099849700927734375f, -_1327)) * 1.44269502162933349609375f) + 1.0f))) : _1337) - _1397, _1397);
        float _1433 = mad(((_1327 < _1332) ? (_1300 - (_1367 / (exp2((_1369 * mad(_1329, 0.3010300099849700927734375f, -_1327)) * 1.44269502162933349609375f) + 1.0f))) : _1338) - _1398, (_1418 * _1418) * mad(_1418, -2.0f, 3.0f), _1398);
        float _1434 = mad(((_1327 < _1333) ? (_1300 - (_1367 / (exp2((_1369 * mad(_1330, 0.3010300099849700927734375f, -_1327)) * 1.44269502162933349609375f) + 1.0f))) : _1339) - _1399, (_1419 * _1419) * mad(_1419, -2.0f, 3.0f), _1399);
        float _1436 = dp3_f32(float3(_1432, _1433, _1434), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
        float3 _1446 = float3(max(mad(_1432 - _1436, 0.930000007152557373046875f, _1436), 0.0f), max(mad(_1433 - _1436, 0.930000007152557373046875f, _1436), 0.0f), max(mad(_1434 - _1436, 0.930000007152557373046875f, _1436), 0.0f));
        _1453 = max(dp3_f32(float3(-0.024003274738788604736328125f, -0.128968775272369384765625f, 1.152971744537353515625f), _1446), 0.0f);
        _1454 = max(dp3_f32(float3(-0.13025714457035064697265625f, 1.140802860260009765625f, -0.0105485282838344573974609375f), _1446), 0.0f);
        _1455 = max(dp3_f32(float3(1.70505154132843017578125f, -0.621790707111358642578125f, -0.083258397877216339111328125f), _1446), 0.0f);
    }

    // mapping polynomial
    float _1461 = asfloat(cb0_m[17u].y);
    float _1467 = asfloat(cb0_m[17u].x);
    float _1476 = asfloat(cb0_m[17u].z);
    float _1477 = ((_1461 * _1455) + ((_1455 * _1455) * _1467)) + _1476;
    float _1478 = _1476 + ((_1467 * (_1454 * _1454)) + (_1461 * _1454));
    float _1479 = _1476 + ((_1467 * (_1453 * _1453)) + (_1461 * _1453));

    // colorbias 
    float _1485 = asfloat(cb0_m[33u].y);
    float _1486 = asfloat(cb0_m[33u].z);
    float _1487 = asfloat(cb0_m[33u].w);
    float _1507 = asfloat(cb0_m[34u].w);

    // brightness 
    float _1522 = asfloat(cb0_m[18u].y);
    float _1523 = log2(max((_1477 * _1485) + (mad(-_1477, _1485, asfloat(cb0_m[34u].x)) * _1507), 0.0f)) * _1522;
    float _1524 = _1522 * log2(max((_1507 * mad(-_1486, _1478, asfloat(cb0_m[34u].y))) + (_1486 * _1478), 0.0f));
    float _1525 = _1522 * log2(max((_1507 * mad(-_1487, _1479, asfloat(cb0_m[34u].z))) + (_1487 * _1479), 0.0f));
    float _1526 = exp2(_1523);
    float _1527 = exp2(_1524);
    float _1528 = exp2(_1525);
    float _3191;
    float _3192;
    float _3193;

    // output here

    // float3 output = float3(_1526, _1527, _1528);
    // float gamma = 1.0f / asfloat(cb0_m[18u].z);

    // // Expected srgb encode here but in fact its gamma (1.5)
    // // SV_Target.xyz = renodx::color::srgb::EncodeSafe(output) * 0.95238101482391357421875f;
    // SV_Target.xyz = renodx::color::gamma::EncodeSafe(output, gamma) * 0.95238101482391357421875f;
    // SV_Target.w = 0.0f;
    // return;

    output_space = 2u;

    // 2u = correct?

    if (output_space == 0u)
    {
        _3191 = (_1528 >= 0.00313066993840038776397705078125f) ? mad(exp2(_1525 * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1528 * 12.9200000762939453125f);
        _3192 = (_1527 >= 0.00313066993840038776397705078125f) ? mad(exp2(_1524 * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1527 * 12.9200000762939453125f);
        _3193 = (_1526 >= 0.00313066993840038776397705078125f) ? mad(exp2(_1523 * 0.4166666567325592041015625f), 1.05499994754791259765625f, -0.054999999701976776123046875f) : (_1526 * 12.9200000762939453125f);
    }
    else
    {
        bool _1553 = cb0_m[56u].w == 1u;
        bool _1554 = cb0_m[56u].w == 2u;
        bool _1555 = cb0_m[56u].w == 3u;
        bool _1556 = cb0_m[56u].w == 4u;
        float _1584 = _1553 ? 1.37915885448455810546875f : (_1554 ? 1.025799274444580078125f : (_1555 ? 0.695452213287353515625f : (_1556 ? 1.0f : 1.70505154132843017578125f)));
        float _1585 = _1553 ? (-0.3088507354259490966796875f) : (_1554 ? (-0.02005250938236713409423828125f) : (_1555 ? 0.140678703784942626953125f : (_1556 ? 0.0f : (-0.621790707111358642578125f))));
        float _1586 = _1553 ? (-0.0703467428684234619140625f) : (_1554 ? (-0.005771367810666561126708984375f) : (_1555 ? 0.16386906802654266357421875f : (_1556 ? 0.0f : (-0.083258397877216339111328125f))));
        float _1587 = _1553 ? (-0.06933529675006866455078125f) : (_1554 ? (-0.00223502493463456630706787109375f) : (_1555 ? 0.0447945632040500640869140625f : (_1556 ? 0.0f : (-0.13025714457035064697265625f))));
        float _1588 = _1553 ? 1.0822923183441162109375f : (_1554 ? 1.0045826435089111328125f : (_1555 ? 0.859671115875244140625f : (_1556 ? 1.0f : 1.140802860260009765625f)));
        float _1589 = _1553 ? (-0.012962051667273044586181640625f) : (_1554 ? (-0.00235231337137520313262939453125f) : (_1555 ? 0.095534317195415496826171875f : (_1556 ? 0.0f : (-0.0105485282838344573974609375f))));
        float _1590 = _1553 ? (-0.00215925858356058597564697265625f) : (_1554 ? (-0.005014003254473209381103515625f) : (_1555 ? (-0.0055258828215301036834716796875f) : (_1556 ? 0.0f : (-0.024003274738788604736328125f))));
        float _1591 = _1553 ? (-0.0454653985798358917236328125f) : (_1554 ? (-0.025293387472629547119140625f) : (_1555 ? 0.0040252101607620716094970703125f : (_1556 ? 0.0f : (-0.128968775272369384765625f))));
        float _1592 = _1553 ? 1.047759532928466796875f : (_1554 ? 1.03044021129608154296875f : (_1555 ? 1.00150072574615478515625f : (_1556 ? 1.0f : 1.152971744537353515625f)));
        float _3188;
        float _3189;
        float _3190;
        if (output_space == 1u)
        {
            float3 _1597 = float3(_1526, _1527, _1528);
            float3 _1602 = float3(dp3_f32(float3(0.61319148540496826171875f, 0.3395120799541473388671875f, 0.0473663322627544403076171875f), _1597), dp3_f32(float3(0.070206902921199798583984375f, 0.9163358211517333984375f, 0.01345001161098480224609375f), _1597), dp3_f32(float3(0.02061887085437774658203125f, 0.109567292034626007080078125f, 0.8696067333221435546875f), _1597));
            float _1608 = max(dp3_f32(float3(_1584, _1585, _1586), _1602), 6.1035199905745685100555419921875e-05f);
            float _1609 = max(dp3_f32(float3(_1587, _1588, _1589), _1602), 6.1035199905745685100555419921875e-05f);
            float _1610 = max(dp3_f32(float3(_1590, _1591, _1592), _1602), 6.1035199905745685100555419921875e-05f);
            _3188 = min(mad(exp2(log2(max(_1610, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1610 * 4.5f);
            _3189 = min(mad(exp2(log2(max(_1609, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1609 * 4.5f);
            _3190 = min(mad(exp2(log2(max(_1608, 0.017999999225139617919921875f)) * 0.449999988079071044921875f), 1.09899997711181640625f, -0.098999999463558197021484375f), _1608 * 4.5f);
            
          }
        else
        {
            float _3185;
            float _3186;
            float _3187;
            if ((output_space == 3u) || (output_space == 5u))
            {
                float3 _1641 = float3(_1126 * 1.5f, _1127 * 1.5f, _1128 * 1.5f);
                float _1642 = dp3_f32(float3(0.4397008121013641357421875f, 0.3829780519008636474609375f, 0.17733480036258697509765625f), _1641);
                float _1643 = dp3_f32(float3(0.089792303740978240966796875f, 0.81342315673828125f, 0.09676162898540496826171875f), _1641);
                float _1644 = dp3_f32(float3(0.01754398643970489501953125f, 0.11154405772686004638671875f, 0.870704114437103271484375f), _1641);
                float _1648 = max(_1644, max(_1642, _1643));
                float _1653 = (max(_1648, 1.0000000133514319600180897396058e-10f) - max(min(_1644, min(_1642, _1643)), 1.0000000133514319600180897396058e-10f)) / max(_1648, 0.00999999977648258209228515625f);
                float _1664 = mad(sqrt(mad(_1642, _1642 - _1644, (_1644 * (_1644 - _1643)) + (_1643 * (_1643 - _1642)))), 1.75f, _1642 + (_1643 + _1644));
                float _1666 = _1653 - 0.4000000059604644775390625f;
                float _1670 = max(1.0f - abs(_1666 * 2.5f), 0.0f);
                float _1681 = mad(float(int(((_1666 < 0.0f) ? 4294967295u : 0u) + uint(_1666 > 0.0f))), mad(-_1670, _1670, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
                float _1689 = ((_1664 <= 0.1599999964237213134765625f) ? _1681 : ((_1664 >= 0.4799999892711639404296875f) ? 0.0f : (_1681 * ((0.07999999821186065673828125f / (_1664 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
                float _1690 = _1642 * _1689;
                float _1691 = _1643 * _1689;
                float _1692 = _1644 * _1689;
                float _1697 = (_1691 - _1692) * 1.73205077648162841796875f;
                float _1699 = (_1690 * 2.0f) - _1691;
                float _1701 = mad(-_1644, _1689, _1699);
                float _1702 = abs(_1697);
                float _1703 = abs(_1701);
                float _1707 = min(_1702, _1703) * (1.0f / max(_1702, _1703));
                float _1708 = _1707 * _1707;
                float _1712 = mad(_1708, mad(_1708, mad(_1708, mad(_1708, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
                float _1722 = mad(_1707, _1712, (_1702 > _1703) ? mad(_1707 * _1712, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_1701 < mad(_1644, _1689, -_1699)) ? (-3.1415927410125732421875f) : 0.0f);
                float _1723 = min(_1697, _1701);
                float _1724 = max(_1697, _1701);
                float _1733 = ((_1690 == _1691) && (_1692 == _1691)) ? 0.0f : ((((_1723 < (-_1723)) && (_1724 >= (-_1724))) ? (-_1722) : _1722) * 57.295780181884765625f);
                float _1737 = clamp((_1733 < 0.0f) ? (_1733 + 360.0f) : _1733, 0.0f, 360.0f);
                float _1740 = (_1737 > 180.0f) ? (_1737 - 360.0f) : _1737;
                float _1777;
                if ((_1740 > (-67.5f)) && (_1740 < 67.5f))
                {
                    float _1747 = _1740 + 67.5f;
                    float _1748 = _1747 * 0.0296296291053295135498046875f;
                    float _1752 = mad(_1747, 0.0296296291053295135498046875f, -trunc(_1748));
                    float _1753 = _1752 * _1752;
                    float _1754 = _1752 * _1753;
                    float _1758 = _1753 * 0.5f;
                    uint _1766 = uint(cvt_f32_i32(_1748));
                    _1777 = (_1766 == 3u) ? (mad(_1752, -0.5f, _1758 + (_1754 * (-0.16666667163372039794921875f))) + 0.16666667163372039794921875f) : ((_1766 == 2u) ? (((_1754 * 0.5f) - _1753) + 0.666666686534881591796875f) : ((_1766 == 1u) ? (mad(_1752, 0.5f, _1758 + (_1754 * (-0.5f))) + 0.16666667163372039794921875f) : ((_1766 != 0u) ? 0.0f : (_1754 * 0.16666667163372039794921875f))));
                }
                else
                {
                    _1777 = 0.0f;
                }
                float3 _1788 = float3(clamp(_1690 + ((((_1653 * _1777) * 1.5f) * mad(-_1642, _1689, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), 0.0f, 65535.0f), clamp(_1691, 0.0f, 65535.0f), clamp(_1692, 0.0f, 65535.0f));
                float _1792 = clamp(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _1788), 0.0f, 65535.0f);
                float _1793 = clamp(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _1788), 0.0f, 65535.0f);
                float _1794 = clamp(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _1788), 0.0f, 65535.0f);
                float _1796 = dp3_f32(float3(_1792, _1793, _1794), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
                float _1800 = mad(_1792 - _1796, 0.959999978542327880859375f, _1796);
                float _1801 = mad(_1793 - _1796, 0.959999978542327880859375f, _1796);
                float _1802 = mad(_1794 - _1796, 0.959999978542327880859375f, _1796);
                float _1809 = (_1800 <= 0.0f) ? (-14.0f) : log2(_1800);
                float _1810 = (_1801 <= 0.0f) ? (-14.0f) : log2(_1801);
                float _1811 = (_1802 <= 0.0f) ? (-14.0f) : log2(_1802);
                float _1899;
                if (_1809 <= (-17.4739322662353515625f))
                {
                    _1899 = -4.0f;
                }
                else
                {
                    float _1898;
                    if ((_1809 > (-17.4739322662353515625f)) && (_1809 < (-2.4739310741424560546875f)))
                    {
                        float _1824 = mad(_1809, 0.3010300099849700927734375f, 5.2601776123046875f);
                        float _1825 = _1824 * 0.6643855571746826171875f;
                        int _1826 = cvt_f32_i32(_1825);
                        float _1829 = mad(_1824, 0.6643855571746826171875f, -trunc(_1825));
                        uint _1836 = min(uint(_1826), 16u);
                        uint _1843 = min(uint(_1826 + 1), 16u);
                        uint _1847 = min(uint(_1826 + 2), 16u);
                        float2 _1853 = float2(_397[_1836].x, _397[_1843].x);
                        _1898 = dp3_f32(float3(_1829 * _1829, _1829, 1.0f), float3(dp3_f32(float3(_397[_1836].x, _397[_1847].x, _397[_1843].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_1853, float2(-1.0f, 1.0f)), dp2_f32(_1853, 0.5f.xx)));
                    }
                    else
                    {
                        float _1897;
                        if ((_1809 >= (-2.4739310741424560546875f)) && (_1809 < 15.52606868743896484375f))
                        {
                            float _1865 = mad(_1809, 0.3010300099849700927734375f, 0.74472749233245849609375f);
                            float _1866 = _1865 * 0.55365467071533203125f;
                            int _1867 = cvt_f32_i32(_1866);
                            float _1870 = mad(_1865, 0.55365467071533203125f, -trunc(_1866));
                            uint _1877 = min(uint(_1867), 16u);
                            uint _1881 = min(uint(_1867 + 1), 16u);
                            uint _1885 = min(uint(_1867 + 2), 16u);
                            float2 _1891 = float2(_397[_1877].y, _397[_1881].y);
                            _1897 = dp3_f32(float3(_1870 * _1870, _1870, 1.0f), float3(dp3_f32(float3(_397[_1877].y, _397[_1885].y, _397[_1881].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_1891, float2(-1.0f, 1.0f)), dp2_f32(_1891, 0.5f.xx)));
                        }
                        else
                        {
                            _1897 = 4.0f;
                        }
                        _1898 = _1897;
                    }
                    _1899 = _1898;
                }
                float _1983;
                if (_1810 <= (-17.4739322662353515625f))
                {
                    _1983 = -4.0f;
                }
                else
                {
                    float _1982;
                    if ((_1810 > (-17.4739322662353515625f)) && (_1810 < (-2.4739310741424560546875f)))
                    {
                        float _1911 = mad(_1810, 0.3010300099849700927734375f, 5.2601776123046875f);
                        float _1912 = _1911 * 0.6643855571746826171875f;
                        int _1913 = cvt_f32_i32(_1912);
                        float _1916 = mad(_1911, 0.6643855571746826171875f, -trunc(_1912));
                        uint _1923 = min(uint(_1913), 16u);
                        uint _1927 = min(uint(_1913 + 1), 16u);
                        uint _1931 = min(uint(_1913 + 2), 16u);
                        float2 _1937 = float2(_397[_1923].x, _397[_1927].x);
                        _1982 = dp3_f32(float3(_1916 * _1916, _1916, 1.0f), float3(dp3_f32(float3(_397[_1923].x, _397[_1931].x, _397[_1927].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_1937, float2(-1.0f, 1.0f)), dp2_f32(_1937, 0.5f.xx)));
                    }
                    else
                    {
                        float _1981;
                        if ((_1810 >= (-2.4739310741424560546875f)) && (_1810 < 15.52606868743896484375f))
                        {
                            float _1949 = mad(_1810, 0.3010300099849700927734375f, 0.74472749233245849609375f);
                            float _1950 = _1949 * 0.55365467071533203125f;
                            int _1951 = cvt_f32_i32(_1950);
                            float _1954 = mad(_1949, 0.55365467071533203125f, -trunc(_1950));
                            uint _1961 = min(uint(_1951), 16u);
                            uint _1965 = min(uint(_1951 + 1), 16u);
                            uint _1969 = min(uint(_1951 + 2), 16u);
                            float2 _1975 = float2(_397[_1961].y, _397[_1965].y);
                            _1981 = dp3_f32(float3(_1954 * _1954, _1954, 1.0f), float3(dp3_f32(float3(_397[_1961].y, _397[_1969].y, _397[_1965].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_1975, float2(-1.0f, 1.0f)), dp2_f32(_1975, 0.5f.xx)));
                        }
                        else
                        {
                            _1981 = 4.0f;
                        }
                        _1982 = _1981;
                    }
                    _1983 = _1982;
                }
                float _2067;
                if (_1811 <= (-17.4739322662353515625f))
                {
                    _2067 = -4.0f;
                }
                else
                {
                    float _2066;
                    if ((_1811 > (-17.4739322662353515625f)) && (_1811 < (-2.4739310741424560546875f)))
                    {
                        float _1995 = mad(_1811, 0.3010300099849700927734375f, 5.2601776123046875f);
                        float _1996 = _1995 * 0.6643855571746826171875f;
                        int _1997 = cvt_f32_i32(_1996);
                        float _2000 = mad(_1995, 0.6643855571746826171875f, -trunc(_1996));
                        uint _2007 = min(uint(_1997), 16u);
                        uint _2011 = min(uint(_1997 + 1), 16u);
                        uint _2015 = min(uint(_1997 + 2), 16u);
                        float2 _2021 = float2(_397[_2007].x, _397[_2011].x);
                        _2066 = dp3_f32(float3(_2000 * _2000, _2000, 1.0f), float3(dp3_f32(float3(_397[_2007].x, _397[_2015].x, _397[_2011].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2021, float2(-1.0f, 1.0f)), dp2_f32(_2021, 0.5f.xx)));
                    }
                    else
                    {
                        float _2065;
                        if ((_1811 >= (-2.4739310741424560546875f)) && (_1811 < 15.52606868743896484375f))
                        {
                            float _2033 = mad(_1811, 0.3010300099849700927734375f, 0.74472749233245849609375f);
                            float _2034 = _2033 * 0.55365467071533203125f;
                            int _2035 = cvt_f32_i32(_2034);
                            float _2038 = mad(_2033, 0.55365467071533203125f, -trunc(_2034));
                            uint _2045 = min(uint(_2035), 16u);
                            uint _2049 = min(uint(_2035 + 1), 16u);
                            uint _2053 = min(uint(_2035 + 2), 16u);
                            float2 _2059 = float2(_397[_2045].y, _397[_2049].y);
                            _2065 = dp3_f32(float3(_2038 * _2038, _2038, 1.0f), float3(dp3_f32(float3(_397[_2045].y, _397[_2053].y, _397[_2049].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2059, float2(-1.0f, 1.0f)), dp2_f32(_2059, 0.5f.xx)));
                        }
                        else
                        {
                            _2065 = 4.0f;
                        }
                        _2066 = _2065;
                    }
                    _2067 = _2066;
                }
                float3 _2070 = float3(exp2(_1899 * 3.3219280242919921875f), exp2(_1983 * 3.3219280242919921875f), exp2(_2067 * 3.3219280242919921875f));
                float3 _2074 = float3(dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _2070), dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _2070), dp3_f32(float3(-0.0055258828215301036834716796875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _2070));
                float _2075 = dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _2074);
                float _2076 = dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _2074);
                float _2077 = dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _2074);
                float _2080 = (_2075 <= 0.0f) ? (-13.28771209716796875f) : log2(_2075);
                float _2165;
                if (_2080 <= (-12.78386783599853515625f))
                {
                    _2165 = mad(_2080, 0.903090000152587890625f, 7.54498291015625f);
                }
                else
                {
                    float _2164;
                    if ((_2080 > (-12.78386783599853515625f)) && (_2080 < 2.2630345821380615234375f))
                    {
                        float _2092 = mad(_2080, 0.3010300099849700927734375f, 3.84832763671875f);
                        float _2093 = _2092 * 1.54540097713470458984375f;
                        int _2094 = cvt_f32_i32(_2093);
                        float _2097 = mad(_2092, 1.54540097713470458984375f, -trunc(_2093));
                        uint _2104 = min(uint(_2094), 16u);
                        uint _2108 = min(uint(_2094 + 1), 16u);
                        uint _2112 = min(uint(_2094 + 2), 16u);
                        float2 _2118 = float2(_397[_2104].z, _397[_2108].z);
                        _2164 = dp3_f32(float3(_2097 * _2097, _2097, 1.0f), float3(dp3_f32(float3(_397[_2104].z, _397[_2112].z, _397[_2108].z), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2118, float2(-1.0f, 1.0f)), dp2_f32(_2118, 0.5f.xx)));
                    }
                    else
                    {
                        float _2163;
                        if ((_2080 >= 2.2630345821380615234375f) && (_2080 < 12.13733673095703125f))
                        {
                            float _2130 = mad(_2080, 0.3010300099849700927734375f, -0.6812412738800048828125f);
                            float _2131 = _2130 * 2.35495090484619140625f;
                            int _2132 = cvt_f32_i32(_2131);
                            float _2135 = mad(_2130, 2.35495090484619140625f, -trunc(_2131));
                            uint _2142 = min(uint(_2132), 16u);
                            uint _2146 = min(uint(_2132 + 1), 16u);
                            uint _2150 = min(uint(_2132 + 2), 16u);
                            float2 _2156 = float2(_397[_2142].w, _397[_2146].w);
                            _2163 = dp3_f32(float3(_2135 * _2135, _2135, 1.0f), float3(dp3_f32(float3(_397[_2142].w, _397[_2150].w, _397[_2146].w), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2156, float2(-1.0f, 1.0f)), dp2_f32(_2156, 0.5f.xx)));
                        }
                        else
                        {
                            _2163 = mad(_2080, 0.01806179992854595184326171875f, 2.78077793121337890625f);
                        }
                        _2164 = _2163;
                    }
                    _2165 = _2164;
                }
                float _2170 = (_2076 <= 0.0f) ? (-13.28771209716796875f) : log2(_2076);
                float _2255;
                if (_2170 <= (-12.78386783599853515625f))
                {
                    _2255 = mad(_2170, 0.903090000152587890625f, 7.54498291015625f);
                }
                else
                {
                    float _2254;
                    if ((_2170 > (-12.78386783599853515625f)) && (_2170 < 2.2630345821380615234375f))
                    {
                        float _2182 = mad(_2170, 0.3010300099849700927734375f, 3.84832763671875f);
                        float _2183 = _2182 * 1.54540097713470458984375f;
                        int _2184 = cvt_f32_i32(_2183);
                        float _2187 = mad(_2182, 1.54540097713470458984375f, -trunc(_2183));
                        uint _2194 = min(uint(_2184), 16u);
                        uint _2198 = min(uint(_2184 + 1), 16u);
                        uint _2202 = min(uint(_2184 + 2), 16u);
                        float2 _2208 = float2(_397[_2194].z, _397[_2198].z);
                        _2254 = dp3_f32(float3(_2187 * _2187, _2187, 1.0f), float3(dp3_f32(float3(_397[_2194].z, _397[_2202].z, _397[_2198].z), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2208, float2(-1.0f, 1.0f)), dp2_f32(_2208, 0.5f.xx)));
                    }
                    else
                    {
                        float _2253;
                        if ((_2170 >= 2.2630345821380615234375f) && (_2170 < 12.13733673095703125f))
                        {
                            float _2220 = mad(_2170, 0.3010300099849700927734375f, -0.6812412738800048828125f);
                            float _2221 = _2220 * 2.35495090484619140625f;
                            int _2222 = cvt_f32_i32(_2221);
                            float _2225 = mad(_2220, 2.35495090484619140625f, -trunc(_2221));
                            uint _2232 = min(uint(_2222), 16u);
                            uint _2236 = min(uint(_2222 + 1), 16u);
                            uint _2240 = min(uint(_2222 + 2), 16u);
                            float2 _2246 = float2(_397[_2232].w, _397[_2236].w);
                            _2253 = dp3_f32(float3(_2225 * _2225, _2225, 1.0f), float3(dp3_f32(float3(_397[_2232].w, _397[_2240].w, _397[_2236].w), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2246, float2(-1.0f, 1.0f)), dp2_f32(_2246, 0.5f.xx)));
                        }
                        else
                        {
                            _2253 = mad(_2170, 0.01806179992854595184326171875f, 2.78077793121337890625f);
                        }
                        _2254 = _2253;
                    }
                    _2255 = _2254;
                }
                float _2260 = (_2077 <= 0.0f) ? (-13.28771209716796875f) : log2(_2077);
                float _2345;
                if (_2260 <= (-12.78386783599853515625f))
                {
                    _2345 = mad(_2260, 0.903090000152587890625f, 7.54498291015625f);
                }
                else
                {
                    float _2344;
                    if ((_2260 > (-12.78386783599853515625f)) && (_2260 < 2.2630345821380615234375f))
                    {
                        float _2272 = mad(_2260, 0.3010300099849700927734375f, 3.84832763671875f);
                        float _2273 = _2272 * 1.54540097713470458984375f;
                        int _2274 = cvt_f32_i32(_2273);
                        float _2277 = mad(_2272, 1.54540097713470458984375f, -trunc(_2273));
                        uint _2284 = min(uint(_2274), 16u);
                        uint _2288 = min(uint(_2274 + 1), 16u);
                        uint _2292 = min(uint(_2274 + 2), 16u);
                        float2 _2298 = float2(_397[_2284].z, _397[_2288].z);
                        _2344 = dp3_f32(float3(_2277 * _2277, _2277, 1.0f), float3(dp3_f32(float3(_397[_2284].z, _397[_2292].z, _397[_2288].z), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2298, float2(-1.0f, 1.0f)), dp2_f32(_2298, 0.5f.xx)));
                    }
                    else
                    {
                        float _2343;
                        if ((_2260 >= 2.2630345821380615234375f) && (_2260 < 12.13733673095703125f))
                        {
                            float _2310 = mad(_2260, 0.3010300099849700927734375f, -0.6812412738800048828125f);
                            float _2311 = _2310 * 2.35495090484619140625f;
                            int _2312 = cvt_f32_i32(_2311);
                            float _2315 = mad(_2310, 2.35495090484619140625f, -trunc(_2311));
                            uint _2322 = min(uint(_2312), 16u);
                            uint _2326 = min(uint(_2312 + 1), 16u);
                            uint _2330 = min(uint(_2312 + 2), 16u);
                            float2 _2336 = float2(_397[_2322].w, _397[_2326].w);
                            _2343 = dp3_f32(float3(_2315 * _2315, _2315, 1.0f), float3(dp3_f32(float3(_397[_2322].w, _397[_2330].w, _397[_2326].w), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2336, float2(-1.0f, 1.0f)), dp2_f32(_2336, 0.5f.xx)));
                        }
                        else
                        {
                            _2343 = mad(_2260, 0.01806179992854595184326171875f, 2.78077793121337890625f);
                        }
                        _2344 = _2343;
                    }
                    _2345 = _2344;
                }
                float3 _2352 = float3(exp2(_2165 * 3.3219280242919921875f) - 3.5073844628641381859779357910156e-05f, exp2(_2255 * 3.3219280242919921875f) - 3.5073844628641381859779357910156e-05f, exp2(_2345 * 3.3219280242919921875f) - 3.5073844628641381859779357910156e-05f);
                float _2367 = exp2(log2(dp3_f32(float3(_1584, _1585, _1586), _2352) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
                float _2368 = exp2(log2(dp3_f32(float3(_1587, _1588, _1589), _2352) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
                float _2369 = exp2(log2(dp3_f32(float3(_1590, _1591, _1592), _2352) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
                _3185 = exp2(log2((1.0f / mad(_2369, 18.6875f, 1.0f)) * mad(_2369, 18.8515625f, 0.8359375f)) * 78.84375f);
                _3186 = exp2(log2((1.0f / mad(_2368, 18.6875f, 1.0f)) * mad(_2368, 18.8515625f, 0.8359375f)) * 78.84375f);
                _3187 = exp2(log2((1.0f / mad(_2367, 18.6875f, 1.0f)) * mad(_2367, 18.8515625f, 0.8359375f)) * 78.84375f);
            }
            else
            {
                float _3182;
                float _3183;
                float _3184;
                if ((output_space == 4u) || (output_space == 6u))
                {
                    float3 _2400 = float3(_1126 * 1.5f, _1127 * 1.5f, _1128 * 1.5f);
                    float _2401 = dp3_f32(float3(0.4397008121013641357421875f, 0.3829780519008636474609375f, 0.17733480036258697509765625f), _2400);
                    float _2402 = dp3_f32(float3(0.089792303740978240966796875f, 0.81342315673828125f, 0.09676162898540496826171875f), _2400);
                    float _2403 = dp3_f32(float3(0.01754398643970489501953125f, 0.11154405772686004638671875f, 0.870704114437103271484375f), _2400);
                    float _2407 = max(_2403, max(_2401, _2402));
                    float _2412 = (max(_2407, 1.0000000133514319600180897396058e-10f) - max(min(_2403, min(_2401, _2402)), 1.0000000133514319600180897396058e-10f)) / max(_2407, 0.00999999977648258209228515625f);
                    float _2423 = mad(sqrt(mad(_2401, _2401 - _2403, (_2403 * (_2403 - _2402)) + (_2402 * (_2402 - _2401)))), 1.75f, _2401 + (_2402 + _2403));
                    float _2424 = _2412 - 0.4000000059604644775390625f;
                    float _2429 = max(1.0f - abs(_2424 * 2.5f), 0.0f);
                    float _2440 = mad(float(int(((_2424 < 0.0f) ? 4294967295u : 0u) + uint(_2424 > 0.0f))), mad(-_2429, _2429, 1.0f), 1.0f) * 0.02500000037252902984619140625f;
                    float _2448 = ((_2423 <= 0.1599999964237213134765625f) ? _2440 : ((_2423 >= 0.4799999892711639404296875f) ? 0.0f : (_2440 * ((0.07999999821186065673828125f / (_2423 * 0.3333333432674407958984375f)) - 0.5f)))) + 1.0f;
                    float _2449 = _2401 * _2448;
                    float _2450 = _2402 * _2448;
                    float _2451 = _2403 * _2448;
                    float _2456 = (_2450 - _2451) * 1.73205077648162841796875f;
                    float _2458 = (_2449 * 2.0f) - _2450;
                    float _2460 = mad(-_2403, _2448, _2458);
                    float _2461 = abs(_2460);
                    float _2462 = abs(_2456);
                    float _2466 = min(_2461, _2462) * (1.0f / max(_2461, _2462));
                    float _2467 = _2466 * _2466;
                    float _2471 = mad(_2467, mad(_2467, mad(_2467, mad(_2467, 0.02083509974181652069091796875f, -0.08513300120830535888671875f), 0.1801410019397735595703125f), -0.33029949665069580078125f), 0.999866008758544921875f);
                    float _2481 = mad(_2466, _2471, (_2461 < _2462) ? mad(_2466 * _2471, -2.0f, 1.57079637050628662109375f) : 0.0f) + ((_2460 < mad(_2403, _2448, -_2458)) ? (-3.1415927410125732421875f) : 0.0f);
                    float _2482 = min(_2456, _2460);
                    float _2483 = max(_2456, _2460);
                    float _2492 = ((_2449 == _2450) && (_2451 == _2450)) ? 0.0f : ((((_2482 < (-_2482)) && (_2483 >= (-_2483))) ? (-_2481) : _2481) * 57.295780181884765625f);
                    float _2496 = clamp((_2492 < 0.0f) ? (_2492 + 360.0f) : _2492, 0.0f, 360.0f);
                    float _2499 = (_2496 > 180.0f) ? (_2496 - 360.0f) : _2496;
                    float _2536;
                    if ((_2499 > (-67.5f)) && (_2499 < 67.5f))
                    {
                        float _2506 = _2499 + 67.5f;
                        float _2507 = _2506 * 0.0296296291053295135498046875f;
                        float _2511 = mad(_2506, 0.0296296291053295135498046875f, -trunc(_2507));
                        float _2512 = _2511 * _2511;
                        float _2513 = _2511 * _2512;
                        float _2517 = _2512 * 0.5f;
                        uint _2525 = uint(cvt_f32_i32(_2507));
                        _2536 = (_2525 == 3u) ? (mad(_2511, -0.5f, (_2513 * (-0.16666667163372039794921875f)) + _2517) + 0.16666667163372039794921875f) : ((_2525 == 2u) ? (((_2513 * 0.5f) - _2512) + 0.666666686534881591796875f) : ((_2525 == 1u) ? (mad(_2511, 0.5f, _2517 + (_2513 * (-0.5f))) + 0.16666667163372039794921875f) : ((_2525 != 0u) ? 0.0f : (_2513 * 0.16666667163372039794921875f))));
                    }
                    else
                    {
                        _2536 = 0.0f;
                    }
                    float3 _2547 = float3(clamp(_2449 + ((((_2412 * _2536) * 1.5f) * mad(-_2401, _2448, 0.02999999932944774627685546875f)) * 0.180000007152557373046875f), 0.0f, 65535.0f), clamp(_2450, 0.0f, 65535.0f), clamp(_2451, 0.0f, 65535.0f));
                    float _2551 = clamp(dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _2547), 0.0f, 65535.0f);
                    float _2552 = clamp(dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _2547), 0.0f, 65535.0f);
                    float _2553 = clamp(dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _2547), 0.0f, 65535.0f);
                    float _2555 = dp3_f32(float3(_2551, _2552, _2553), float3(0.272228717803955078125f, 0.674081742763519287109375f, 0.053689517080783843994140625f));
                    float _2559 = mad(_2551 - _2555, 0.959999978542327880859375f, _2555);
                    float _2560 = mad(_2552 - _2555, 0.959999978542327880859375f, _2555);
                    float _2561 = mad(_2553 - _2555, 0.959999978542327880859375f, _2555);
                    float _2568 = (_2559 <= 0.0f) ? (-14.0f) : log2(_2559);
                    float _2569 = (_2560 <= 0.0f) ? (-14.0f) : log2(_2560);
                    float _2570 = (_2561 <= 0.0f) ? (-14.0f) : log2(_2561);
                    float _2655;
                    if (_2568 <= (-17.4739322662353515625f))
                    {
                        _2655 = -4.0f;
                    }
                    else
                    {
                        float _2654;
                        if ((_2568 > (-17.4739322662353515625f)) && (_2568 < (-2.4739310741424560546875f)))
                        {
                            float _2583 = mad(_2568, 0.3010300099849700927734375f, 5.2601776123046875f);
                            float _2584 = _2583 * 0.6643855571746826171875f;
                            int _2585 = cvt_f32_i32(_2584);
                            float _2588 = mad(_2583, 0.6643855571746826171875f, -trunc(_2584));
                            uint _2595 = min(uint(_2585), 16u);
                            uint _2599 = min(uint(_2585 + 1), 16u);
                            uint _2603 = min(uint(_2585 + 2), 16u);
                            float2 _2609 = float2(_397[_2595].x, _397[_2599].x);
                            _2654 = dp3_f32(float3(_2588 * _2588, _2588, 1.0f), float3(dp3_f32(float3(_397[_2595].x, _397[_2603].x, _397[_2599].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2609, float2(-1.0f, 1.0f)), dp2_f32(_2609, 0.5f.xx)));
                        }
                        else
                        {
                            float _2653;
                            if ((_2568 >= (-2.4739310741424560546875f)) && (_2568 < 15.52606868743896484375f))
                            {
                                float _2621 = mad(_2568, 0.3010300099849700927734375f, 0.74472749233245849609375f);
                                float _2622 = _2621 * 0.55365467071533203125f;
                                int _2623 = cvt_f32_i32(_2622);
                                float _2626 = mad(_2621, 0.55365467071533203125f, -trunc(_2622));
                                uint _2633 = min(uint(_2623), 16u);
                                uint _2637 = min(uint(_2623 + 1), 16u);
                                uint _2641 = min(uint(_2623 + 2), 16u);
                                float2 _2647 = float2(_397[_2633].y, _397[_2637].y);
                                _2653 = dp3_f32(float3(_2626 * _2626, _2626, 1.0f), float3(dp3_f32(float3(_397[_2633].y, _397[_2641].y, _397[_2637].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2647, float2(-1.0f, 1.0f)), dp2_f32(_2647, 0.5f.xx)));
                            }
                            else
                            {
                                _2653 = 4.0f;
                            }
                            _2654 = _2653;
                        }
                        _2655 = _2654;
                    }
                    float _2739;
                    if (_2569 <= (-17.4739322662353515625f))
                    {
                        _2739 = -4.0f;
                    }
                    else
                    {
                        float _2738;
                        if ((_2569 > (-17.4739322662353515625f)) && (_2569 < (-2.4739310741424560546875f)))
                        {
                            float _2667 = mad(_2569, 0.3010300099849700927734375f, 5.2601776123046875f);
                            float _2668 = _2667 * 0.6643855571746826171875f;
                            int _2669 = cvt_f32_i32(_2668);
                            float _2672 = mad(_2667, 0.6643855571746826171875f, -trunc(_2668));
                            uint _2679 = min(uint(_2669), 16u);
                            uint _2683 = min(uint(_2669 + 1), 16u);
                            uint _2687 = min(uint(_2669 + 2), 16u);
                            float2 _2693 = float2(_397[_2679].x, _397[_2683].x);
                            _2738 = dp3_f32(float3(_2672 * _2672, _2672, 1.0f), float3(dp3_f32(float3(_397[_2679].x, _397[_2687].x, _397[_2683].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2693, float2(-1.0f, 1.0f)), dp2_f32(_2693, 0.5f.xx)));
                        }
                        else
                        {
                            float _2737;
                            if ((_2569 >= (-2.4739310741424560546875f)) && (_2569 < 15.52606868743896484375f))
                            {
                                float _2705 = mad(_2569, 0.3010300099849700927734375f, 0.74472749233245849609375f);
                                float _2706 = _2705 * 0.55365467071533203125f;
                                int _2707 = cvt_f32_i32(_2706);
                                float _2710 = mad(_2705, 0.55365467071533203125f, -trunc(_2706));
                                uint _2717 = min(uint(_2707), 16u);
                                uint _2721 = min(uint(_2707 + 1), 16u);
                                uint _2725 = min(uint(_2707 + 2), 16u);
                                float2 _2731 = float2(_397[_2717].y, _397[_2721].y);
                                _2737 = dp3_f32(float3(_2710 * _2710, _2710, 1.0f), float3(dp3_f32(float3(_397[_2717].y, _397[_2725].y, _397[_2721].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2731, float2(-1.0f, 1.0f)), dp2_f32(_2731, 0.5f.xx)));
                            }
                            else
                            {
                                _2737 = 4.0f;
                            }
                            _2738 = _2737;
                        }
                        _2739 = _2738;
                    }
                    float _2823;
                    if (_2570 <= (-17.4739322662353515625f))
                    {
                        _2823 = -4.0f;
                    }
                    else
                    {
                        float _2822;
                        if ((_2570 > (-17.4739322662353515625f)) && (_2570 < (-2.4739310741424560546875f)))
                        {
                            float _2751 = mad(_2570, 0.3010300099849700927734375f, 5.2601776123046875f);
                            float _2752 = _2751 * 0.6643855571746826171875f;
                            int _2753 = cvt_f32_i32(_2752);
                            float _2756 = mad(_2751, 0.6643855571746826171875f, -trunc(_2752));
                            uint _2763 = min(uint(_2753), 16u);
                            uint _2767 = min(uint(_2753 + 1), 16u);
                            uint _2771 = min(uint(_2753 + 2), 16u);
                            float2 _2777 = float2(_397[_2763].x, _397[_2767].x);
                            _2822 = dp3_f32(float3(_2756 * _2756, _2756, 1.0f), float3(dp3_f32(float3(_397[_2763].x, _397[_2771].x, _397[_2767].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2777, float2(-1.0f, 1.0f)), dp2_f32(_2777, 0.5f.xx)));
                        }
                        else
                        {
                            float _2821;
                            if ((_2570 >= (-2.4739310741424560546875f)) && (_2570 < 15.52606868743896484375f))
                            {
                                float _2789 = mad(_2570, 0.3010300099849700927734375f, 0.74472749233245849609375f);
                                float _2790 = _2789 * 0.55365467071533203125f;
                                int _2791 = cvt_f32_i32(_2790);
                                float _2794 = mad(_2789, 0.55365467071533203125f, -trunc(_2790));
                                uint _2801 = min(uint(_2791), 16u);
                                uint _2805 = min(uint(_2791 + 1), 16u);
                                uint _2809 = min(uint(_2791 + 2), 16u);
                                float2 _2815 = float2(_397[_2801].y, _397[_2805].y);
                                _2821 = dp3_f32(float3(_2794 * _2794, _2794, 1.0f), float3(dp3_f32(float3(_397[_2801].y, _397[_2809].y, _397[_2805].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2815, float2(-1.0f, 1.0f)), dp2_f32(_2815, 0.5f.xx)));
                            }
                            else
                            {
                                _2821 = 4.0f;
                            }
                            _2822 = _2821;
                        }
                        _2823 = _2822;
                    }
                    float3 _2826 = float3(exp2(_2655 * 3.3219280242919921875f), exp2(_2739 * 3.3219280242919921875f), exp2(_2823 * 3.3219280242919921875f));
                    float3 _2830 = float3(dp3_f32(float3(0.695452213287353515625f, 0.140678703784942626953125f, 0.16386906802654266357421875f), _2826), dp3_f32(float3(0.0447945632040500640869140625f, 0.859671115875244140625f, 0.095534317195415496826171875f), _2826), dp3_f32(float3(-0.0055258828215301036834716796875f, 0.0040252101607620716094970703125f, 1.00150072574615478515625f), _2826));
                    float _2831 = dp3_f32(float3(1.45143926143646240234375f, -0.236510753631591796875f, -0.214928567409515380859375f), _2830);
                    float _2832 = dp3_f32(float3(-0.07655377686023712158203125f, 1.1762297153472900390625f, -0.0996759235858917236328125f), _2830);
                    float _2833 = dp3_f32(float3(0.0083161480724811553955078125f, -0.0060324496589601039886474609375f, 0.99771630764007568359375f), _2830);
                    float _2836 = (_2831 <= 0.0f) ? (-13.28771209716796875f) : log2(_2831);
                    float _2926;
                    if (_2836 <= (-12.78386783599853515625f))
                    {
                        _2926 = -2.3010299205780029296875f;
                    }
                    else
                    {
                        float _2925;
                        if ((_2836 > (-12.78386783599853515625f)) && (_2836 < 2.2630345821380615234375f))
                        {
                            float _2847 = mad(_2836, 0.3010300099849700927734375f, 3.84832763671875f);
                            float _2848 = _2847 * 1.54540097713470458984375f;
                            int _2849 = cvt_f32_i32(_2848);
                            float _2852 = mad(_2847, 1.54540097713470458984375f, -trunc(_2848));
                            uint _2858 = min(uint(_2849 + 6), 16u);
                            uint _2864 = min(uint((_2849 + 1) + 6), 16u);
                            uint _2870 = min(uint((_2849 + 2) + 6), 16u);
                            float2 _2876 = float2(_397[_2858].x, _397[_2864].x);
                            _2925 = dp3_f32(float3(_2852 * _2852, _2852, 1.0f), float3(dp3_f32(float3(_397[_2858].x, _397[_2870].x, _397[_2864].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2876, float2(-1.0f, 1.0f)), dp2_f32(_2876, 0.5f.xx)));
                        }
                        else
                        {
                            float _2924;
                            if ((_2836 >= 2.2630345821380615234375f) && (_2836 < 12.4948215484619140625f))
                            {
                                float _2888 = mad(_2836, 0.3010300099849700927734375f, -0.6812412738800048828125f);
                                float _2889 = _2888 * 2.272672176361083984375f;
                                int _2890 = cvt_f32_i32(_2889);
                                float _2893 = mad(_2888, 2.272672176361083984375f, -trunc(_2889));
                                uint _2899 = min(uint(_2890 + 6), 16u);
                                uint _2905 = min(uint((_2890 + 1) + 6), 16u);
                                uint _2911 = min(uint((_2890 + 2) + 6), 16u);
                                float2 _2917 = float2(_397[_2899].y, _397[_2905].y);
                                _2924 = dp3_f32(float3(_2893 * _2893, _2893, 1.0f), float3(dp3_f32(float3(_397[_2899].y, _397[_2911].y, _397[_2905].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2917, float2(-1.0f, 1.0f)), dp2_f32(_2917, 0.5f.xx)));
                            }
                            else
                            {
                                _2924 = mad(_2836, 0.0361235998570919036865234375f, 2.8496720790863037109375f);
                            }
                            _2925 = _2924;
                        }
                        _2926 = _2925;
                    }
                    float _2931 = (_2832 <= 0.0f) ? (-13.28771209716796875f) : log2(_2832);
                    float _3021;
                    if (_2931 <= (-12.78386783599853515625f))
                    {
                        _3021 = -2.3010299205780029296875f;
                    }
                    else
                    {
                        float _3020;
                        if ((_2931 > (-12.78386783599853515625f)) && (_2931 < 2.2630345821380615234375f))
                        {
                            float _2942 = mad(_2931, 0.3010300099849700927734375f, 3.84832763671875f);
                            float _2943 = _2942 * 1.54540097713470458984375f;
                            int _2944 = cvt_f32_i32(_2943);
                            float _2947 = mad(_2942, 1.54540097713470458984375f, -trunc(_2943));
                            uint _2953 = min(uint(_2944 + 6), 16u);
                            uint _2959 = min(uint((_2944 + 1) + 6), 16u);
                            uint _2965 = min(uint((_2944 + 2) + 6), 16u);
                            float2 _2971 = float2(_397[_2953].x, _397[_2959].x);
                            _3020 = dp3_f32(float3(_2947 * _2947, _2947, 1.0f), float3(dp3_f32(float3(_397[_2953].x, _397[_2965].x, _397[_2959].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_2971, float2(-1.0f, 1.0f)), dp2_f32(_2971, 0.5f.xx)));
                        }
                        else
                        {
                            float _3019;
                            if ((_2931 >= 2.2630345821380615234375f) && (_2931 < 12.4948215484619140625f))
                            {
                                float _2983 = mad(_2931, 0.3010300099849700927734375f, -0.6812412738800048828125f);
                                float _2984 = _2983 * 2.272672176361083984375f;
                                int _2985 = cvt_f32_i32(_2984);
                                float _2988 = mad(_2983, 2.272672176361083984375f, -trunc(_2984));
                                uint _2994 = min(uint(_2985 + 6), 16u);
                                uint _3000 = min(uint((_2985 + 1) + 6), 16u);
                                uint _3006 = min(uint((_2985 + 2) + 6), 16u);
                                float2 _3012 = float2(_397[_2994].y, _397[_3000].y);
                                _3019 = dp3_f32(float3(_2988 * _2988, _2988, 1.0f), float3(dp3_f32(float3(_397[_2994].y, _397[_3006].y, _397[_3000].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3012, float2(-1.0f, 1.0f)), dp2_f32(_3012, 0.5f.xx)));
                            }
                            else
                            {
                                _3019 = mad(_2931, 0.0361235998570919036865234375f, 2.8496720790863037109375f);
                            }
                            _3020 = _3019;
                        }
                        _3021 = _3020;
                    }
                    float _3026 = (_2833 <= 0.0f) ? (-13.28771209716796875f) : log2(_2833);
                    float _3116;
                    if (_3026 <= (-12.78386783599853515625f))
                    {
                        _3116 = -2.3010299205780029296875f;
                    }
                    else
                    {
                        float _3115;
                        if ((_3026 > (-12.78386783599853515625f)) && (_3026 < 2.2630345821380615234375f))
                        {
                            float _3037 = mad(_3026, 0.3010300099849700927734375f, 3.84832763671875f);
                            float _3038 = _3037 * 1.54540097713470458984375f;
                            int _3039 = cvt_f32_i32(_3038);
                            float _3042 = mad(_3037, 1.54540097713470458984375f, -trunc(_3038));
                            uint _3048 = min(uint(_3039 + 6), 16u);
                            uint _3054 = min(uint((_3039 + 1) + 6), 16u);
                            uint _3060 = min(uint((_3039 + 2) + 6), 16u);
                            float2 _3066 = float2(_397[_3048].x, _397[_3054].x);
                            _3115 = dp3_f32(float3(_3042 * _3042, _3042, 1.0f), float3(dp3_f32(float3(_397[_3048].x, _397[_3060].x, _397[_3054].x), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3066, float2(-1.0f, 1.0f)), dp2_f32(_3066, 0.5f.xx)));
                        }
                        else
                        {
                            float _3114;
                            if ((_3026 >= 2.2630345821380615234375f) && (_3026 < 12.4948215484619140625f))
                            {
                                float _3078 = mad(_3026, 0.3010300099849700927734375f, -0.6812412738800048828125f);
                                float _3079 = _3078 * 2.272672176361083984375f;
                                int _3080 = cvt_f32_i32(_3079);
                                float _3083 = mad(_3078, 2.272672176361083984375f, -trunc(_3079));
                                uint _3089 = min(uint(_3080 + 6), 16u);
                                uint _3095 = min(uint((_3080 + 1) + 6), 16u);
                                uint _3101 = min(uint((_3080 + 2) + 6), 16u);
                                float2 _3107 = float2(_397[_3089].y, _397[_3095].y);
                                _3114 = dp3_f32(float3(_3083 * _3083, _3083, 1.0f), float3(dp3_f32(float3(_397[_3089].y, _397[_3101].y, _397[_3095].y), float3(0.5f, 0.5f, -1.0f)), dp2_f32(_3107, float2(-1.0f, 1.0f)), dp2_f32(_3107, 0.5f.xx)));
                            }
                            else
                            {
                                _3114 = mad(_3026, 0.0361235998570919036865234375f, 2.8496720790863037109375f);
                            }
                            _3115 = _3114;
                        }
                        _3116 = _3115;
                    }
                    float3 _3120 = float3(exp2(_2926 * 3.3219280242919921875f), exp2(_3021 * 3.3219280242919921875f), exp2(_3116 * 3.3219280242919921875f));
                    float _3135 = exp2(log2(dp3_f32(float3(_1584, _1585, _1586), _3120) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
                    float _3136 = exp2(log2(dp3_f32(float3(_1587, _1588, _1589), _3120) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
                    float _3137 = exp2(log2(dp3_f32(float3(_1590, _1591, _1592), _3120) * 9.9999997473787516355514526367188e-05f) * 0.1593017578125f);
                    _3182 = exp2(log2((1.0f / mad(_3137, 18.6875f, 1.0f)) * mad(_3137, 18.8515625f, 0.8359375f)) * 78.84375f);
                    _3183 = exp2(log2((1.0f / mad(_3136, 18.6875f, 1.0f)) * mad(_3136, 18.8515625f, 0.8359375f)) * 78.84375f);
                    _3184 = exp2(log2(mad(_3135, 18.8515625f, 0.8359375f) * (1.0f / mad(_3135, 18.6875f, 1.0f))) * 78.84375f);
                }
                else
                {

                    // Run into this branch
                    
                    float3 _3159 = float3(_1526, _1527, _1528);
                    // float3 _3164 = float3(dp3_f32(float3(0.61319148540496826171875f, 0.3395120799541473388671875f, 0.0473663322627544403076171875f), _3159), dp3_f32(float3(0.070206902921199798583984375f, 0.9163358211517333984375f, 0.01345001161098480224609375f), _3159), dp3_f32(float3(0.02061887085437774658203125f, 0.109567292034626007080078125f, 0.8696067333221435546875f), _3159));
                    // float _3175 = asfloat(cb0_m[18u].z);
                    // _3182 = exp2(log2(dp3_f32(float3(_1590, _1591, _1592), _3164)) * _3175);
                    // _3183 = exp2(log2(dp3_f32(float3(_1587, _1588, _1589), _3164)) * _3175);
                    // _3184 = exp2(log2(dp3_f32(float3(_1584, _1585, _1586), _3164)) * _3175);
                    float3 color = float3(_1526, _1527, _1528);
                    // static const float3x3 PreTransform = float3x3(
                    //     0.6131914854, 0.3395120800, 0.0473663323,
                    //     0.0702069029, 0.9163358212, 0.0134500116,
                    //     0.0206188709, 0.1095672920, 0.8696067333
                    // );

                    // float3 pre = mul(PreTransform, color);
                    float3 pre = renodx::color::ap1::from::BT709(color);

                    float3 row0 = float3(_1584, _1585, _1586);
                    float3 row1 = float3(_1587, _1588, _1589);
                    float3 row2 = float3(_1590, _1591, _1592);

                    // row0 = float3(1.7050515413284302, -0.6217907071113586, -0.08325839787721634);
                    // row1 = float3(-0.13025714457035065, 1.1408028602600098, -0.010548528283834457);
                    // row2 = float3(-0.024003274738788605, -0.12896877527236938, 1.1529717445373535);

                    float3 gamutConverted = renodx::color::bt709::from::AP1(pre);
                    float gamma = 1.0f / asfloat(cb0_m[18u].z);
                    // gamma = 1.5f;

                    float3 output = renodx::color::gamma::EncodeSafe(gamutConverted, gamma);
                    SV_Target.xyz = output * 0.95238101482391357421875f;
                    SV_Target.w = 0.0f;
                    return;
                }
                _3185 = _3182;
                _3186 = _3183;
                _3187 = _3184;
            }
            _3188 = _3185;
            _3189 = _3186;
            _3190 = _3187;
        }
        _3191 = _3188;
        _3192 = _3189;
        _3193 = _3190;
    }
    SV_Target.x = _3193 * 0.95238101482391357421875f;
    SV_Target.y = _3192 * 0.95238101482391357421875f;
    SV_Target.z = _3191 * 0.95238101482391357421875f;

    SV_Target.w = 0.0f;
}

SPIRV_Cross_Output main(SPIRV_Cross_Input stage_input)
{
    gl_Layer = stage_input.gl_Layer;
    TEXCOORD = stage_input.TEXCOORD;
    frag_main();
    SPIRV_Cross_Output stage_output;
    stage_output.SV_Target = SV_Target;

    return stage_output;
}
